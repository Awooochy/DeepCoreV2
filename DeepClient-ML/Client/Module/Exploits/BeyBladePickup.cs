using System.Collections;
using DeepCore.Client.Module.WorldHacks;
using MelonLoader;
using VRC;
using VRC.SDKBase;

namespace DeepCore.Client.Module.Exploits
{
    internal class BeyBladePickup
    {
        public static bool isPickupSpinning = false;
        public static void State(bool s)
        {
            if (s)
            {
                isPickupSpinning = true;
                MelonCoroutines.Start(BeyBladePickups());
            }
            else
            {
                isPickupSpinning = false;
                MelonCoroutines.Stop(BeyBladePickups());
            }
        }
        public static IEnumerator BeyBladePickups()
        {
            while (isPickupSpinning)
            {
                bool flag = !isPickupSpinning || !Player.prop_Player_0;
                if (flag)
                {
                    isPickupSpinning = false;
                    yield break;
                }
                foreach (VRC_Pickup pickup in OnLoadedScaneManager.sdk3Items)
                {
                    PickupUtils.TakeOwnerShipPickup(pickup);
                    pickup.transform.Rotate(90f, 0f, 0f);
                }
                VRC_Pickup[] array = null;
                yield return null;
            }
            yield break;
        }
    }
}
