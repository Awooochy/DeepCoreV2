using System.Collections;
using DeepCore.Client.Misc;
using MelonLoader;
using UnityEngine;
using VRC.SDKBase;

namespace DeepCore.Client.Module.Exploits
{
    internal class CamSoundSpammer
    {
        public static bool bool_6 = false;
        public static void State(bool s)
        {
            if (s)
            {
                var a = ReMod.Core.VRChat.PlayerExtensions.GetVRCPlayer();
                MelonCoroutines.Start(CameraSounds(a));
            }
            else
            {
                bool_6 = false;
            }
        }
        public static IEnumerator CameraSounds(VRCPlayer player)
        {
            if (!bool_6 && player != null)
            {
                bool_6 = true;
                while (bool_6)
                {
                    var cameraIndicator = MonoBehaviourPublicObTrObVRGaObVRleSiObUnique
                        .field_Public_Static_MonoBehaviourPublicObTrObVRGaObVRleSiObUnique_0
                        .field_Internal_UserCameraIndicator_0;

                    if (cameraIndicator != null)
                    {
                        cameraIndicator.transform.position = player.transform.position;
                        PhotonUtil.SendRPC(
                            (VRC_EventHandler.VrcEventType)14,
                            "",
                            false,
                            (VRC_EventHandler.VrcBooleanOp)(-1),
                            cameraIndicator.gameObject,
                            null,
                            "PhotoCapture",
                            0f,
                            0,
                            null,
                            (VRC_EventHandler.VrcBroadcastType)4,
                            0f
                        );
                    }
                    yield return new WaitForSeconds(0.3f);
                }
                bool_6 = false;
            }
        }
    }
}
