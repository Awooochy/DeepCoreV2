using System.Collections;
using System.Collections.Generic;
using System.Linq;
using MelonLoader;
using UnityEngine;
using VRC.SDKBase;

namespace DeepCore.Client.Module.Exploits
{
    internal class MirrorsSpammer
    {
        public static bool SpamM = false;
        public static List<VRC_Trigger> AllTriggers = OnLoadedScaneManager.allTriggers.ToList();
        public static void State(bool s)
        {
            if (s)
            {
                SpamM = true;
                MelonCoroutines.Start(SpamMirrors());
            }
            else
            {
                SpamM = false;
            }
        }
        public static IEnumerator SpamMirrors()
        {
            while (SpamM)
            {
                foreach (VRC_Trigger vrc_Trigger in AllTriggers)
                {
                    if (vrc_Trigger.name.ToLower().Contains("mirror") || vrc_Trigger.transform.parent.name.ToLower().Contains("mirror"))
                    {
                        Networking.LocalPlayer.TakeOwnership(vrc_Trigger.gameObject);
                        vrc_Trigger.Interact();
                    }
                }
                yield return new WaitForSeconds(0.1f);
            }
            yield break;
        }
    }
}
